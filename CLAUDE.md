# CLAUDE.md - System Information for Future Claude Instances

## System Overview
- **Host**: 192.168.8.104
- **OS**: Debian GNU/Linux on Raspberry Pi 5 (ARM64)
- **Location**: /opt/adsb2dd
- **Project**: adsb2dd - ADS-B to delay-Doppler truth converter

## Project Description
Converts ADS-B aircraft position data into delay-Doppler coordinates for radar validation. This tool provides ground truth data that can be overlaid on blah2's bistatic radar output to validate and calibrate radar detections.

## Relationship with blah2
- Companion tool to the blah2 radar system (located at /opt/blah2)
- Provides truth data for radar measurement validation
- Both projects by the same author (github.com/30hours)
- Data flow: Aircraft → tar1090 → adsb2dd → JSON → blah2 overlay

## Key Features
- Web-based API endpoint calculator
- Real-time processing of tar1090 ADS-B data  
- JSON output with delay (km) and Doppler (Hz)
- Support for multiple simultaneous input sets
- 10-minute auto-cleanup for inactive inputs
- Causal smoothing algorithm for Doppler calculation

## Directory Structure
- `src/` - Node.js application source code
- `src/public/` - Web interface files
- `src/node/` - Node modules and utilities
- `docker-compose.yml` - Docker orchestration
- `Dockerfile` - Container definition

## Services (Docker)
- **adsb2dd** - Node.js Express server
- Port: 49155 (web interface)
- Network mode: host
- Based on Node.js 16

## Common Operations

### Starting the System
```bash
cd /opt/adsb2dd
sudo docker compose up -d
```

### Stopping the System
```bash
cd /opt/adsb2dd
sudo docker compose down
```

### Checking Status
```bash
sudo docker ps | grep adsb2dd
sudo docker logs adsb2dd
```

## Network Access
- Web interface: http://localhost:49155
- API endpoint format generated by web calculator
- Returns JSON with aircraft delay-Doppler data

## Technical Implementation
- Converts lat/lon/alt to ECEF coordinates
- Computes bistatic range: distance_rx_to_target + distance_tx_to_target - distance_rx_to_tx
- Uses moving average filter for Doppler smoothing (k=10 samples)
- First API call initializes processing loop (returns empty {})
- Subsequent calls return populated delay-Doppler data

## Important Notes
- Requires tar1090 server for ADS-B data source
- Uses host networking for direct network access
- Node.js Express application
- MIT licensed open source project
- Automatic cleanup of inactive input sets after 10 minutes

## Integration Example
The adsb2dd output can be used with blah2 to overlay truth data on radar displays, helping to:
- Validate radar detections
- Calibrate system parameters
- Identify false positives/negatives
- Tune processing algorithms

## Future Improvements (per README)
- 2D delay-Doppler plot visualization
- Geographic map display
- Enhanced Doppler smoothing algorithms
- Functional testing suite

## Troubleshooting
- Empty {} response on first API call is normal
- Check tar1090 server connectivity if no data
- Verify Docker container is running
- Review logs for processing errors

## File Ownership
- Owner: user
- Appropriate permissions for Docker access

Last Updated: 2025-09-27
EOF'
